import java.util.*;
import java.util.regex.Pattern;

// Interface
interface StudentOperations {
    void addStudent();
    void displayStudents();
    void removeStudent(int roll);
    void searchStudent(int roll);
}

// Student class
class Student {
    int roll;
    String name;
    String email;

    Student(int roll, String name, String email) {
        this.roll = roll;
        this.name = name;
        this.email = email;
    }
}

// Implementation class
class StudentManager implements StudentOperations {

    // Using List, ArrayList, and Vector
    List<Student> studentList = new ArrayList<>();
    Vector<Student> studentVector = new Vector<>();

    Scanner sc = new Scanner(System.in);

    // REGEX patterns
    final String ROLL_REGEX = "^[0-9]+$";
    final String NAME_REGEX = "^[a-zA-Z ]+$";
    final String EMAIL_REGEX = "^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$";

    // Add student
    public void addStudent() {
        try {
            System.out.print("Enter Roll Number: ");
            String rollStr = sc.nextLine();
            if (!Pattern.matches(ROLL_REGEX, rollStr)) {
                System.out.println("Invalid Roll Number!");
                return;
            }
            int roll = Integer.parseInt(rollStr);

            System.out.print("Enter Name: ");
            String name = sc.nextLine();
            if (!Pattern.matches(NAME_REGEX, name)) {
                System.out.println("Invalid Name!");
                return;
            }

            System.out.print("Enter Email: ");
            String email = sc.nextLine();
            if (!Pattern.matches(EMAIL_REGEX, email)) {
                System.out.println("Invalid Email!");
                return;
            }

            Student s = new Student(roll, name, email);
            studentList.add(s);
            studentVector.add(s);

            System.out.println("Student Record Added Successfully!");

        } catch (Exception e) {
            System.out.println("Error while adding student!");
        }
    }

    // Display students
    public void displayStudents() {
        if (studentList.isEmpty()) {
            System.out.println("No Student Records Found!");
            return;
        }

        System.out.println("\n--- Student Records ---");
        for (Student s : studentList) {
            System.out.println("Roll: " + s.roll +
                    ", Name: " + s.name +
                    ", Email: " + s.email);
        }
    }

    // Remove student
    public void removeStudent(int roll) {
        boolean found = false;
        Iterator<Student> itr = studentList.iterator();

        while (itr.hasNext()) {
            Student s = itr.next();
            if (s.roll == roll) {
                itr.remove();
                studentVector.remove(s);
                found = true;
                System.out.println("Student Removed Successfully!");
                break;
            }
        }

        if (!found) {
            System.out.println("Student Not Found!");
        }
    }

    // Search student
    public void searchStudent(int roll) {
        for (Student s : studentList) {
            if (s.roll == roll) {
                System.out.println("Student Found:");
                System.out.println("Roll: " + s.roll +
                        ", Name: " + s.name +
                        ", Email: " + s.email);
                return;
            }
        }
        System.out.println("Student Not Found!");
    }
}
public class Regex2 {

	 public static void main(String[] args) {

	        StudentManager sm = new StudentManager();
	        Scanner sc = new Scanner(System.in);

	        int choice;

	        try {
	            do {
	                System.out.println("\n--- STUDENT RECORD MENU ---");
	                System.out.println("1. Add Student");
	                System.out.println("2. Display All Students");
	                System.out.println("3. Remove Student by Roll Number");
	                System.out.println("4. Search Student by Roll Number");
	                System.out.println("5. Exit");
	                System.out.print("Enter your choice: ");

	                choice = sc.nextInt();
	                sc.nextLine(); // consume newline

	                switch (choice) {
	                    case 1:
	                        sm.addStudent();
	                        break;
	                    case 2:
	                        sm.displayStudents();
	                        break;
	                    case 3:
	                        System.out.print("Enter Roll Number: ");
	                        int r1 = sc.nextInt();
	                        sm.removeStudent(r1);
	                        break;
	                    case 4:
	                        System.out.print("Enter Roll Number: ");
	                        int r2 = sc.nextInt();
	                        sm.searchStudent(r2);
	                        break;
	                    case 5:
	                        System.out.println("Program Exited Successfully!");
	                        break;
	                    default:
	                        System.out.println("Invalid Choice!");
	                }

	            } while (choice != 5);

	        } catch (Exception e) {
	            System.out.println("Invalid Input!");
	        } finally {
	            sc.close();
	        }
	    }
	}
	
